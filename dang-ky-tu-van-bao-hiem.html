<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>ƒêƒÉng K√Ω T∆∞ V·∫•n B·∫£o Hi·ªÉm | B·∫£o Hi·ªÉm B·∫£o Vi·ªát ƒê√† N·∫µng</title>
  <meta name="description"
    content="Form ƒëƒÉng k√Ω t∆∞ v·∫•n b·∫£o hi·ªÉm: H·ªç t√™n, S·ªë ƒëi·ªán tho·∫°i, Lo·∫°i b·∫£o hi·ªÉm quan t√¢m (√î t√¥, S·ª©c kho·∫ª, Ch√°y n·ªï b·∫Øt bu·ªôc, Nh√¢n th·ªç). G·ª≠i th√¥ng tin, ch√∫ng t√¥i s·∫Ω li√™n h·ªá ngay." />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

  <link rel="canonical" href="https://baohiembaovietdanang.vn/dang-ky-tu-van-bao-hiem.html" />

  <meta name="geo.region" content="VN-DN" />
  <meta name="geo.placename" content="ƒê√† N·∫µng, Vi·ªát Nam" />
  <meta name="geo.position" content="16.0544;108.2022" />
  <meta name="ICBM" content="16.0544, 108.2022" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://baohiembaovietdanang.vn/dang-ky-tu-van-bao-hiem.html" />
  <meta property="og:site_name" content="B·∫£o Hi·ªÉm B·∫£o Vi·ªát ƒê√† N·∫µng" />
  <meta property="og:title" content="ƒêƒÉng K√Ω T∆∞ V·∫•n B·∫£o Hi·ªÉm" />
  <meta property="og:description"
    content="ƒêƒÉng k√Ω t∆∞ v·∫•n nhanh: H·ªç t√™n, S·ªë ƒëi·ªán tho·∫°i, Lo·∫°i b·∫£o hi·ªÉm quan t√¢m. Ch√∫ng t√¥i s·∫Ω li√™n h·ªá trong th·ªùi gian s·ªõm nh·∫•t." />
  <meta property="og:image" content="https://baohiembaovietdanang.vn/assets/healthcare.png" />
  <meta property="og:locale" content="vi_VN" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="ƒêƒÉng K√Ω T∆∞ V·∫•n B·∫£o Hi·ªÉm" />
  <meta name="twitter:description"
    content="ƒêƒÉng k√Ω t∆∞ v·∫•n nhanh: H·ªç t√™n, S·ªë ƒëi·ªán tho·∫°i, Lo·∫°i b·∫£o hi·ªÉm quan t√¢m. Ch√∫ng t√¥i s·∫Ω li√™n h·ªá trong th·ªùi gian s·ªõm nh·∫•t." />
  <meta name="twitter:image" content="https://baohiembaovietdanang.vn/assets/healthcare.png" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" href="https://baohiembaovietdanang.vn/assets/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="https://baohiembaovietdanang.vn/assets/favicon-16x16.png" sizes="16x16" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://baohiembaovietdanang.vn/assets/apple-touch-icon.png" />

  <!-- Preload + Styles -->
  <link rel="preload" href="/style.css" as="style" />
  <link rel="stylesheet" href="/style.css" />

  <style>
    /* Page-specific light styling complementing existing site styles */
    .page-wrap {
      min-height: 100vh;
      display: grid;
      align-items: start;

    }

    .form-container {
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card {
      padding: 20px;
      min-width: 400px;
      background-color: white;
    }

    .card-div {
      height: 100px;
    }

    .img-card {
      width: 500px;
    }

    .card h1 {
      font-size: 22px;
      margin: 0 0 8px;
    }

    .card p.subtitle {
      color: #6b7280;
      margin: 0 0 16px;
      font-size: 14px;
    }

    .stack {
      display: grid;
      gap: 14px;
    }

    .field label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 6px;
    }

    .input,
    .select {
      width: 100%;
      box-sizing: border-box;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
      transition: border-color .2s, box-shadow .2s;
      background: #fff;
    }

    .input:focus,
    .select:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
    }

    .error-text {
      color: #d93025;
      font-size: 12px;
      margin-top: 6px;
    }

    .actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 6px;
      flex-wrap: wrap;
    }

    .btn {
      appearance: none;
      border: 1px solid #e5e7eb;
      background: #fff;
      color: #111827;
      padding: 8px 14px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background .2s, border-color .2s;
    }

    .btn:hover {
      background: #f9fafb;
    }

    .btn-primary {
      background: #2563eb;
      color: #fff;
      border-color: #2563eb;
    }

    .btn-primary:hover {
      background: #1d4ed8;
      border-color: #1d4ed8;
    }

    .left-float {}

    body {
      background-image: url('https://baohiemnguoiviet.vn/bao-viet-an-gia/templates/images/bg_banner.png');
      background-repeat: no-repeat;
      background-size: contain;
      background-size: 100% 100%;
    }

    .success-msg {
      display: none;
      background: #ecfdf5;
      color: #065f46;
      border: 1px solid #a7f3d0;
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 14px;
    }

    @media (max-width: 560px) {
      .form-container {
        padding: 12px;
        display: flex;
        flex-direction: column;
        gap: 10px
      }

      .card {
        padding: 16px;
        box-sizing: border-box;
        min-width: 0;
      }

      .img-card {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="float-container">
    <button onclick="window.location.href='tel:+8490549949'" id="floatBtn" class="floating-btn">
      <img src="assets/phone-icon.png" style="width: 30px; height: 30px;" alt="G·ªçi ngay" />
    </button>
    <button onclick="window.location.href='https://zalo.me/84931909697'" id="floatBtn" class="floating-btn">
      <img src="https://haiauint.vn/wp-content/uploads/2024/02/zalo-icon.png" style="width: 100%; height: 100%;"
        alt="Chat Zalo" />
    </button>
    <a href="/dang-ky-tu-van-bao-hiem.html">
      <button class="registry-button">
        ƒêƒÉng k√Ω ngay
      </button>
    </a>
  </div>


  <nav class="head-wrapper">
    <img onclick="window.location.href='/index.html'" class="logo"
      src="https://baovietonline.com.vn/templates/images/logo2x.png" alt="Logo B·∫£o Vi·ªát ƒê√† N·∫µng" />
    <div class="hamburger" onclick="toggleMenu()">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <ul class="navigation-items" id="menu">
      <li onclick="window.location.href='/index.html'">Trang ch·ªß</li>
      <li class="has-popover">B·∫£o hi·ªÉm nh√¢n th·ªç
        <div class="popover">
          <ul class="submenu">
            <li onclick="window.location.href='/baohiemantamhoachdinh.html'">An T√¢m Ho·∫°ch ƒê·ªãnh</li>
            <li onclick="window.location.href='/baohiemankhangnhuy.html'">An Khang Nh∆∞ √ù</li>
            <li onclick="window.location.href='/baohiemanphatcattuong.html'">An Ph√°t C√°t T∆∞·ªùng</li>
            <li onclick="window.location.href='/baohiemankhanghanhphuc.html'">An Khang H·∫°nh Ph√∫c</li>
            <li onclick="window.location.href='/baohiemanvuisongkhoe.html'">An vui s·ªëng kho·∫ª</li>
            <li onclick="window.location.href='/baohiemantamhocvan.html'">An t√¢m h·ªçc v·∫•n</li>
            <li onclick="window.location.href='/baohiemanphattrondoi.html'">An ph√°t tr·ªçn ƒë·ªùi</li>
          </ul>
        </div>
      </li>
      <li class="has-popover">B·∫£o hi·ªÉm phi nh√¢n th·ªç
        <div class="popover">
          <ul class="submenu">
            <li onclick="window.location.href='/baohiemoto.html'">B·∫£o hi·ªÉm v·∫≠t ch·∫•t xe √¥ t√¥</li>
            <li onclick="window.location.href='/baohiemchayno.html'">B·∫£o hi·ªÉm ch√°y, n·ªï b·∫Øt bu·ªôc</li>
            <li onclick="window.location.href='/baohiemruirotaisan.html'">B·∫£o hi·ªÉm m·ªçi r·ªßi ro t√†i s·∫£n</li>
            <li onclick="window.location.href='/baohiemsuckhoe.html'">B·∫£o Vi·ªát An Gia</li>
            <li onclick="window.location.href='/baohiemintercare.html'">B·∫£o hi·ªÉm Intercare</li>
            <li onclick="window.location.href='/baohiemxemay.html'">B·∫£o hi·ªÉm xe m√°y</li>
            <li onclick="window.location.href='/baohiemtravel.html'">B·∫£o hi·ªÉm du l·ªãch Flexi</li>
          </ul>
        </div>
      </li>
      <li onclick="window.location.href='/tuyen-dung.html'">Tuy·ªÉn d·ª•ng</li>
      <li onclick="window.location.href='/tin-tuc.html'">Tin t·ª©c</li>
    </ul>
    <div class="contact-wrapper">
      <img class="phone-logo" src="https://img.icons8.com/ios_filled/512/FAB005/apple-phone.png" alt="Phone icon" />
      <div class="contact-detail">
        <p class="contact-title">T∆∞ v·∫•n mi·ªÖn ph√≠</p>
        <p class="phone-number">0905.499.496 <span style="color: black; font-weight: 600;">/</span> 0931.909.697</p>
      </div>
    </div>
  </nav>

  <div style="max-width: 1250px; margin: auto; padding: 15px;">
    <div class="breadcrumb" style="margin-top: 100px; color: white;">
      <a href="/index.html" style="color: white;">TRANG CH·ª¶</a> ‚Ä¢ <a style="color: white;" href="#">ƒêƒÇNG K√ù</a>
    </div>

    <div class="form-container" style="margin-bottom: 100px;">

      <img class="img-card"
        src="https://baohiemnguoiviet.vn/bao-viet-an-gia/uploads/content/6ae4bfec8009f66c7a4409c8a80f7c79.png" alt="">
      <div class="card" role="region" aria-label="ƒêƒÉng k√Ω t∆∞ v·∫•n b·∫£o hi·ªÉm">
        <h1>ƒêƒÉng k√Ω t∆∞ v·∫•n b·∫£o hi·ªÉm</h1>
        <p class="subtitle">ƒêi·ªÅn th√¥ng tin b√™n d∆∞·ªõi, ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm nh·∫•t.</p>

        <div id="success" class="success-msg" aria-live="polite">G·ª≠i ƒëƒÉng k√Ω th√†nh c√¥ng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm.</div>

        <form id="adviceForm" novalidate>
          <div class="stack">
            <div class="field">
              <label for="fullName">H·ªç v√† t√™n</label>
              <input id="fullName" name="fullName" class="input" type="text" placeholder="Nguy·ªÖn VƒÉn A" required
                minlength="2" />
              <div class="error-text" data-error="fullName"></div>
            </div>

            <div class="field">
              <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
              <input id="phone" name="phone" class="input" type="tel" inputmode="tel" placeholder="0905 499 496"
                required />
              <div class="error-text" data-error="phone"></div>
            </div>

            <div class="field">
              <label for="insuranceType">Lo·∫°i b·∫£o hi·ªÉm quan t√¢m</label>
              <select id="insuranceType" name="insuranceType" class="select" required>
                <option value="" disabled selected>Ch·ªçn lo·∫°i b·∫£o hi·ªÉm</option>
                <option value="B·∫£o hi·ªÉm √¥ t√¥">B·∫£o hi·ªÉm √¥ t√¥</option>
                <option value="B·∫£o hi·ªÉm s·ª©c kho·∫ª">B·∫£o hi·ªÉm s·ª©c kho·∫ª</option>
                <option value="B·∫£o hi·ªÉm ch√°y n·ªï b·∫Øt bu·ªôc">B·∫£o hi·ªÉm ch√°y n·ªï b·∫Øt bu·ªôc</option>
                <option value="B·∫£o hi·ªÉm nh√¢n th·ªç">B·∫£o hi·ªÉm nh√¢n th·ªç</option>
                <option value="B·∫£o hi·ªÉm du l·ªãch">B·∫£o hi·ªÉm du l·ªãch</option>
                <option value="B·∫£o hi·ªÉm xe m√°y">B·∫£o hi·ªÉm xe m√°y</option>
                <option value="B·∫£o hi·ªÉm intercare">B·∫£o hi·ªÉm intercare</option>
              </select>
              <div class="error-text" data-error="insuranceType"></div>
            </div>

            <div class="actions">
              <button type="button" class="btn" id="resetBtn">L√†m m·ªõi</button>
              <button type="submit" class="btn btn-primary">G·ª≠i ƒëƒÉng k√Ω</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <footer>
    <div
      style="display: flex; justify-content: space-between; padding: 20px 5%; background: linear-gradient(274deg, rgba(6, 66, 120, 0.8) 5.2%, rgba(5, 120, 185, 0.8) 97.96%);">
      <img style="width: 160px; height: 30px;" src="https://www.baoviet.com.vn/themes/md_baoviet/img/logo.png" alt="" />
    </div>
    <div class="footer-container">
      <div class="infor-col">
        <p class="title">Th√¥ng tin li√™n h·ªá</p>
        <ul>
          <li>S·ªë ƒëi·ªán tho·∫°i: 0905.499.496 / 0931.909.697</li>
          <li>Gmail: <a href="mailto:vanthangnguyen1802@gmail.com">vanthangnguyen1802@gmail.com</a></li>
          <li>Fan Page: facebook.com</li>
        </ul>
      </div>
      <div class="infor-col">
        <p class="title">C√°c s·∫£n ph·∫©m m·ªõi</p>
        <ul>
          <li>B·∫£o l√£nh vi·ªán ph√≠ - ChƒÉm s√≥c Y t·∫ø cao c·∫•p</li>
          <li>B·∫£o hi·ªÉm Xe c∆° gi·ªõi</li>
          <li>B·∫£o hi·ªÉm Ch√°y, n·ªï b·∫Øt bu·ªôc</li>
          <li>B·∫£o v·ªá v∆∞·ª£t tr·ªôi</li>
          <li>T√≠ch l≈©y ∆∞u vi·ªát</li>
        </ul>
      </div>
      <div class="infor-col">
        <p class="title">Gi·∫£i th∆∞·ªüng danh gi√°</p>
        <p style="margin:0;">B·∫£o hi·ªÉm phi nh√¢n th·ªç t·ªët nh·∫•t Vi·ªát Nam</p>
        <div style="display: flex; gap: 12px">
          <img class="icon_gt" src="https://baovietonline.com.vn/uploads/content/e3753335c1f0f2538ee6fc0f07e4b2b0.png"
            alt="" />
          <img class="icon_gt" src="https://baovietonline.com.vn/uploads/content/fbbf198a4c26dc8b27158d49c7a22984.png"
            alt="" />
          <img class="icon_gt" src="https://baovietonline.com.vn/uploads/content/9c28c0d2654e022cff9c689ee87f6c7f.png"
            alt="" />
          <img class="icon_gt" src="https://baovietonline.com.vn/uploads/content/7f3415b56cf02a9f78dba149c0edef97.png"
            alt="" />
        </div>
      </div>
    </div>
  </footer>

  <!-- EmailJS Browser SDK -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

  <!-- Supabase Browser SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>

  <!-- Supabase Key Manager -->
  <script src="supabase-key-manager.js"></script>

  <script>
    function toggleMenu() {
      document.getElementById('menu').classList.toggle('active');
    }

    // Supabase Configuration
    const SUPABASE_CONFIG = {
      url: null,
      anonKey: null
    };

    // Initialize Supabase client
    let supabase = null;
    let supabaseInitialized = false;

    async function initializeSupabase() {
      if (supabaseInitialized) return supabase;

      try {
        // Wait for Supabase script to load
        if (!window.supabase) {
          console.log('‚è≥ Waiting for Supabase script to load...');
          await new Promise(resolve => {
            const checkSupabase = () => {
              if (window.supabase) {
                resolve();
              } else {
                setTimeout(checkSupabase, 100);
              }
            };
            checkSupabase();
          });
        }

        // Try Key Manager first
        try {
          if (window.SupabaseKeyManager) {
            const keyManager = new SupabaseKeyManager({
              baseUrl: 'https://fiaxrsiycswrwucthian.supabase.co',
              cacheExpiry: 15 * 60 * 1000 // 15 minutes cache for form
            });

            supabase = await keyManager.createSupabaseClient();
            console.log('‚úÖ Supabase connected with auto-fetched key');

            supabaseInitialized = true;
            return supabase;
          }
        } catch (keyManagerError) {
          console.warn('‚ö†Ô∏è Key Manager failed, trying fallback:', keyManagerError.message);
        }

        // Fallback to old method
        const storedUrl = localStorage.getItem('supabase_url') || 'https://fiaxrsiycswrwucthian.supabase.co';
        const storedKey = localStorage.getItem('supabase_anon_key');

        if (storedUrl && storedKey) {
          SUPABASE_CONFIG.url = storedUrl;
          SUPABASE_CONFIG.anonKey = storedKey;
          supabase = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.anonKey);
          console.log('‚úÖ Supabase connected with stored key');
        } else {
          console.log('‚ö†Ô∏è No Supabase key available, registration will only send email');
        }

        supabaseInitialized = true;
        return supabase;

      } catch (error) {
        console.error('‚ùå Supabase initialization failed:', error);
        supabaseInitialized = true;
        return null;
      }
    }

    (function () {
      const form = document.getElementById('adviceForm');
      const successEl = document.getElementById('success');
      const resetBtn = document.getElementById('resetBtn');
      const submitBtn = document.querySelector('#adviceForm button[type="submit"]');

      const phoneRegex = /^(0|\+?\d{1,3})?[\d\s\-]{8,15}$/;

      function setError(name, msg) {
        const el = document.querySelector(`[data-error="${name}"]`);
        if (el) el.textContent = msg || '';
      }

      function clearErrors() {
        ['fullName', 'phone', 'insuranceType'].forEach(n => setError(n, ''));
      }

      resetBtn.addEventListener('click', function () {
        form.reset();
        clearErrors();
        successEl.style.display = 'none';
      });

      // Initialize EmailJS if available (loaded via CDN below)
      let emailReady = false;
      try {
        if (typeof emailjs !== 'undefined') {
          // EmailJS v4 init format
          emailjs.init({ publicKey: 'tdnoam3chIIX9izFA' });
          emailReady = true;
        }
      } catch (err) {
        console.warn('EmailJS init failed or not available:', err);
      }

      // Initialize Supabase in background
      initializeSupabase().catch(error => {
        console.log('Supabase initialization failed, registration will only send email:', error);
      });

      // Function to save registration to database
      async function saveRegistrationToDB(data) {
        try {
          const client = await initializeSupabase();
          if (!client) {
            console.log('üìß Supabase not available, skipping database save');
            return { success: false, message: 'Database not configured' };
          }

          console.log('üíæ Saving registration to database...');

          const registrationData = {
            full_name: data.fullName,
            phone: data.phone,
            service_interest: data.insuranceType,
            status: 'pending',
            // Note: email field is not in current form but keeping for compatibility
            email: null
          };

          const { data: result, error } = await client
            .from('registrations')
            .insert(registrationData)
            .select()
            .single();

          if (error) {
            console.error('‚ùå Database save failed:', error);
            return { success: false, message: error.message };
          }

          console.log('‚úÖ Registration saved to database:', result);
          return { success: true, data: result };

        } catch (error) {
          console.error('‚ùå Database save error:', error);
          return { success: false, message: error.message };
        }
      }

      const SERVICE_ID = 'service_8yvyqcj';
      const TEMPLATE_ID = 'template_jycweoi';

      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        clearErrors();

        const fullNameInput = document.getElementById('fullName');
        const phoneInput = document.getElementById('phone');
        const insuranceTypeSelect = document.getElementById('insuranceType');

        const data = {
          fullName: fullNameInput && 'value' in fullNameInput ? fullNameInput.value.trim() : '',
          phone: phoneInput && 'value' in phoneInput ? phoneInput.value.trim() : '',
          insuranceType: insuranceTypeSelect && 'value' in insuranceTypeSelect ? insuranceTypeSelect.value : '',
        };

        let valid = true;
        if (!data.fullName || data.fullName.length < 2) {
          setError('fullName', 'Vui l√≤ng nh·∫≠p h·ªç v√† t√™n (t·ªëi thi·ªÉu 2 k√Ω t·ª±)');
          valid = false;
        }
        if (!data.phone || !phoneRegex.test(data.phone)) {
          setError('phone', 'S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá');
          valid = false;
        }
        if (!data.insuranceType) {
          setError('insuranceType', 'Vui l√≤ng ch·ªçn lo·∫°i b·∫£o hi·ªÉm');
          valid = false;
        }

        if (!valid) return;

        // Log data to console as requested
        console.log('Form submitted:', data);

        // Prepare UI for sending
        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.textContent = 'ƒêang x·ª≠ l√Ω...';
        }

        // First, save to database
        const dbResult = await saveRegistrationToDB(data);
        if (dbResult.success) {
          console.log('‚úÖ Registration saved to database successfully');
        } else {
          console.warn('‚ö†Ô∏è Database save failed, but continuing with email:', dbResult.message);
        }

        // Then send email regardless of DB result
        if (emailReady) {
          const templateParams = {
            name: data.fullName,
            from_email: data.phone,
            title: 'Kh√°ch h√†ng ƒëƒÉng k√Ω t∆∞ v·∫•n t·ª´ baohiembaovietdanang.vn',
            message: `Kh√°ch h√†ng ƒëƒÉng k√Ω t∆∞ v·∫•n\nH·ªç t√™n: ${data.fullName}\nSƒêT: ${data.phone}\nLo·∫°i BH: ${data.insuranceType}`,
          };

          emailjs.send(SERVICE_ID, TEMPLATE_ID, templateParams)
            .then(() => {
              // Success message includes DB status
              let successMessage = 'G·ª≠i ƒëƒÉng k√Ω th√†nh c√¥ng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm.';
              if (dbResult.success) {
                successMessage += ' (ƒê√£ l∆∞u v√†o h·ªá th·ªëng)';
              }

              successEl.textContent = successMessage;
              successEl.style.display = 'block';
              successEl.style.background = '#ecfdf5';
              successEl.style.color = '#065f46';
              form.reset();
            })
            .catch((error) => {
              console.error('Email send failed:', error);

              // Even if email fails, if DB succeeded, show partial success
              if (dbResult.success) {
                successEl.textContent = 'ƒê√£ l∆∞u th√¥ng tin v√†o h·ªá th·ªëng, nh∆∞ng email th√¥ng b√°o g·ª≠i th·∫•t b·∫°i. Ch√∫ng t√¥i v·∫´n s·∫Ω li√™n h·ªá v·ªõi b·∫°n.';
                successEl.style.background = '#fff7ed';
                successEl.style.color = '#9a3412';
              } else {
                successEl.textContent = 'G·ª≠i ƒëƒÉng k√Ω th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c li√™n h·ªá tr·ª±c ti·∫øp.';
                successEl.style.background = '#fef2f2';
                successEl.style.color = '#991b1b';
              }
              successEl.style.display = 'block';
            })
            .finally(() => {
              if (submitBtn) {
                submitBtn.disabled = false;
                submitBtn.textContent = 'G·ª≠i ƒëƒÉng k√Ω';
              }
            });
        } else {
          // Fallback: no email available, but show DB result
          if (dbResult.success) {
            successEl.textContent = 'ƒê√£ l∆∞u th√¥ng tin v√†o h·ªá th·ªëng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm. (Email th√¥ng b√°o kh√¥ng kh·∫£ d·ª•ng)';
            successEl.style.background = '#ecfdf5';
            successEl.style.color = '#065f46';
          } else {
            successEl.textContent = 'ƒê√£ ghi nh·∫≠n th√¥ng tin c·ª•c b·ªô (h·ªá th·ªëng kh√¥ng kh·∫£ d·ª•ng). Vui l√≤ng li√™n h·ªá tr·ª±c ti·∫øp ƒë·ªÉ ƒë·∫£m b·∫£o.';
            successEl.style.background = '#fff7ed';
            successEl.style.color = '#9a3412';
          }
          successEl.style.display = 'block';
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.textContent = 'G·ª≠i ƒëƒÉng k√Ω';
          }
        }
      });
    })();
  </script>

  <script src="scripts/onshow-tap.js"></script>
  <script src="scripts/notification.js"></script>
</body>

</html>